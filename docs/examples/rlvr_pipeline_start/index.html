<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-examples/rlvr_pipeline_start" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">RLVR Pipeline | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://momo-oi.github.io/ROLL/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://momo-oi.github.io/ROLL/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://momo-oi.github.io/ROLL/docs/examples/rlvr_pipeline_start"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RLVR Pipeline | My Site"><meta data-rh="true" name="description" content="Table of Contents"><meta data-rh="true" property="og:description" content="Table of Contents"><link data-rh="true" rel="icon" href="/ROLL/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://momo-oi.github.io/ROLL/docs/examples/rlvr_pipeline_start"><link data-rh="true" rel="alternate" href="https://momo-oi.github.io/ROLL/docs/examples/rlvr_pipeline_start" hreflang="en"><link data-rh="true" rel="alternate" href="https://momo-oi.github.io/ROLL/docs/examples/rlvr_pipeline_start" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"RLVR Pipeline","item":"https://momo-oi.github.io/ROLL/docs/examples/rlvr_pipeline_start"}]}</script><link rel="alternate" type="application/rss+xml" href="/ROLL/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ROLL/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/ROLL/assets/css/styles.f7cb7648.css">
<script src="/ROLL/assets/js/runtime~main.e8b27f47.js" defer="defer"></script>
<script src="/ROLL/assets/js/main.b09c0023.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ROLL/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ROLL/"><div class="navbar__logo"><img src="/ROLL/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ROLL/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ROLL/docs/examples/agent_pipeline_start">Tutorial</a><a class="navbar__item navbar__link" href="/ROLL/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/ROLL/docs/examples/agent_pipeline_start">examples</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/examples/agent_pipeline_start">Comprehensive Guide: Using the Agentic Part of ROLL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/examples/config_guide">Configuration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ROLL/docs/examples/rlvr_pipeline_start">RLVR Pipeline</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ROLL/docs/">ROLL</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ROLL/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">examples</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">RLVR Pipeline</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RLVR Pipeline</h1></header>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#rlvr-pipeline">RLVR Pipeline</a>
<ul>
<li><a href="#%EF%B8%8Foverview">✨️Overview</a></li>
<li><a href="#%EF%B8%8Fcore-components">✨️Core Components</a>
<ul>
<li><a href="#main-module-rlvrpipeline">Main Module (<code>RLVRPipeline</code>)</a></li>
<li><a href="#configuration-file-rlvrconfig">Configuration File (<code>RLVRConfig</code>)</a>
<ul>
<li><a href="#configuration-file-structure-and-organization">Configuration File Structure and Organization</a></li>
</ul>
</li>
<li><a href="#reward-worker">Reward Worker</a></li>
</ul>
</li>
<li><a href="#%EF%B8%8Fdata-preparation">✨️Data Preparation</a>
<ul>
<li><a href="#data-format">Data Format</a>
<ul>
<li><a href="#common-data-fields">Common Data Fields</a></li>
<li><a href="#domain-specific-fields">Domain-Specific Fields</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%EF%B8%8Frunning-the-pipeline">✨️Running the Pipeline</a>
<ul>
<li><a href="#method-1-using-python-launcher-script">Method 1: Using Python Launcher Script</a></li>
<li><a href="#method-2-using-helper-shell-scripts">Method 2: Using Helper Shell Scripts</a></li>
</ul>
</li>
<li><a href="#%EF%B8%8Fstep-by-step-example">✨️Step-by-Step Example</a>
<ul>
<li><a href="#step-1-configure-settings">Step 1: Configure Settings</a></li>
<li><a href="#step-2-prepare-environment-and-dependencies">Step 2: Prepare Environment and Dependencies</a></li>
<li><a href="#step-3-launch-the-pipeline">Step 3: Launch the Pipeline</a></li>
<li><a href="#step-4-monitoring">Step 4: Monitoring</a></li>
<li><a href="#step-5-outputs-and-results">Step 5: Outputs and Results</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️overview">✨️Overview<a href="#️overview" class="hash-link" aria-label="Direct link to ✨️Overview" title="Direct link to ✨️Overview">​</a></h2>
<p>This pipeline offers the following core advantages:</p>
<ul>
<li>
<p><strong>Diverse Task Support</strong>: Built-in support for various task types including mathematical reasoning, code generation, LLM-as-judge evaluation, and instruction following, each equipped with specialized reward evaluation mechanisms and flexible extension interfaces to accommodate new task types.</p>
</li>
<li>
<p><strong>Multi-Task Joint Training</strong>: Enables simultaneous optimization of model capabilities across multiple domains such as math, programming, and general reasoning, with flexible control over data sampling ratios and reward weight configurations for each domain.</p>
</li>
<li>
<p><strong>Algorithm-Friendly Reinforcement Learning Framework</strong>: Provides a rich set of reinforcement learning strategy options (over 20 types), including but not limited to reward normalization, reward clipping, various advantage estimation methods, and more. Not limited to a single algorithm implementation, it supports multiple reinforcement learning algorithms such as PPO, GRPO, Reinforce++, TOPR and RAFT++.</p>
</li>
<li>
<p><strong>Comprehensive Performance Monitoring</strong>: Fine-grained metric tracking system that simultaneously monitors group-level and batch-level performance metrics, providing comprehensive visualization and analysis capabilities for the model training process.</p>
</li>
<li>
<p><strong>Efficient Distributed Computing</strong>: Leverages the <a href="https://www.ray.io/" target="_blank" rel="noopener noreferrer">Ray</a> framework to implement efficient distributed training on large-scale GPU clusters, significantly improving training speed and resource utilization.</p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️core-components">✨️Core Components<a href="#️core-components" class="hash-link" aria-label="Direct link to ✨️Core Components" title="Direct link to ✨️Core Components">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="main-module-rlvrpipeline">Main Module (<code>RLVRPipeline</code>)<a href="#main-module-rlvrpipeline" class="hash-link" aria-label="Direct link to main-module-rlvrpipeline" title="Direct link to main-module-rlvrpipeline">​</a></h3>
<p><code>RLVRPipeline</code> (located in <code>roll/pipeline/rlvr/rlvr_pipeline.py</code>) is the primary coordinator for the entire reinforcement learning process. It manages the complete training workflow, including:</p>
<ul>
<li>Initializing and managing distributed workers (actor, critic, reference, and various reward workers).</li>
<li>Coordinating data collection and processing.</li>
<li>Executing model training steps (e.g., PPO updates for actor and critic).</li>
<li>Handling model synchronization and checkpoint saving.</li>
<li>Validation set evaluation.</li>
<li>Recording metrics and experiment tracking.</li>
</ul>
<p><strong>Source code</strong>: <code>roll/pipeline/rlvr/rlvr_pipeline.py</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-file-rlvrconfig">Configuration File (<code>RLVRConfig</code>)<a href="#configuration-file-rlvrconfig" class="hash-link" aria-label="Direct link to configuration-file-rlvrconfig" title="Direct link to configuration-file-rlvrconfig">​</a></h3>
<p><code>RLVRConfig</code> (defined in <code>roll/pipeline/rlvr/rlvr_config.py</code>) is a Pydantic/dataclass-based configuration object used to specify all parameters for running the rlvr pipeline. This configuration system is flexibly designed, supporting configuration via YAML files and managed using the Hydra framework.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-file-structure-and-organization">Configuration File Structure and Organization<a href="#configuration-file-structure-and-organization" class="hash-link" aria-label="Direct link to Configuration File Structure and Organization" title="Direct link to Configuration File Structure and Organization">​</a></h4>
<p>Configuration files (such as <code>examples/qwen2.5-7B-rlvr_megatron/rlvr_config.yaml</code>) are organized by functional modules, containing the following main sections:</p>
<ol>
<li>
<p><strong>Experiment Basic Settings</strong></p>
<ul>
<li><code>exp_name</code>: Experiment name, used to identify a specific training run</li>
<li><code>logging_dir</code>: Path for saving log files</li>
<li><code>output_dir</code>: Path for saving model checkpoints and output files</li>
</ul>
</li>
<li>
<p><strong>Training Control Parameters</strong></p>
<ul>
<li><code>max_steps</code>: Maximum number of training steps</li>
<li><code>save_steps</code>: Frequency for saving model checkpoints</li>
<li><code>logging_steps</code>: Frequency for recording training metrics</li>
<li><code>eval_steps</code>: Frequency for performing validation evaluations</li>
<li><code>resume_from_checkpoint</code>: Whether to continue training from a checkpoint</li>
</ul>
</li>
<li>
<p><strong>Model Configuration</strong></p>
<ul>
<li><code>pretrain</code>: Path to pre-trained weights for Actor and Reference models</li>
<li><code>reward_pretrain</code>: Path to pre-trained weights for Critic model</li>
</ul>
</li>
<li>
<p><strong>Reinforcement Learning Algorithm Parameters</strong></p>
<ul>
<li><code>ppo_epochs</code>: Number of PPO updates per batch of data</li>
<li><code>init_kl_coef</code>: Initial coefficient for KL divergence</li>
<li><code>target_kl</code>: Target value for KL divergence</li>
<li><code>adv_estimator</code>: Advantage estimation method (e.g., <code>gae</code>)</li>
<li><code>gamma</code>: Discount factor</li>
<li><code>lambd</code>: GAE lambda parameter</li>
<li><code>reward_normalize</code>: Whether to normalize rewards</li>
<li><code>reward_clip</code>: Reward clipping range</li>
<li><code>value_clip</code>: Value clipping range</li>
<li>...</li>
</ul>
</li>
<li>
<p><strong>Worker Configuration</strong>
Each worker (<code>actor_train</code>, <code>actor_infer</code>, <code>critic</code>, <code>reference</code>) configuration contains:</p>
<ul>
<li><strong>Model Parameters</strong> (<code>model_args</code>)<!-- -->
<ul>
<li><code>model_type</code>: Model type (e.g., <code>causal_lm</code>)</li>
<li><code>dtype</code>: Computation precision (e.g., <code>bf16</code>, <code>fp16</code>)</li>
<li>...</li>
</ul>
</li>
<li><strong>Training Parameters</strong> (<code>training_args</code>)<!-- -->
<ul>
<li><code>learning_rate</code>: Learning rate</li>
<li><code>per_device_train_batch_size</code>: Training batch size per device</li>
<li><code>gradient_accumulation_steps</code>: Gradient accumulation steps</li>
<li><code>weight_decay</code>: Weight decay coefficient</li>
<li><code>max_grad_norm</code>: Gradient clipping threshold</li>
<li>...</li>
</ul>
</li>
<li><strong>Generation Parameters</strong> (<code>generating_args</code>)<!-- -->
<ul>
<li><code>max_new_tokens</code>: Maximum number of new tokens to generate</li>
<li><code>top_p</code>: Nucleus sampling parameter</li>
<li><code>temperature</code>: Sampling temperature</li>
<li><code>do_sample</code>: Whether to use sampling for generation</li>
<li>...</li>
</ul>
</li>
<li><strong>Distributed Strategy</strong> (<code>strategy_args</code>)<!-- -->
<ul>
<li><code>strategy_name</code>: Distributed strategy to use (e.g., <code>megatron_train</code>, <code>vllm</code>, <code>sglang</code>, <code>hf_infer</code>)</li>
<li>Strategy-specific parameters: e.g., <code>tp_size</code> (tensor parallelism size), <code>pp_size</code> (pipeline parallelism size)</li>
<li><code>gpu_memory_utilization</code>: GPU memory utilization (vLLM-specific)</li>
</ul>
</li>
<li><strong>Device Mapping</strong> (<code>device_mapping</code>)<!-- -->
<ul>
<li>Specifies which GPU devices the worker should use</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Reward Settings</strong>
The <code>rewards</code> section contains reward worker configurations for different domains:</p>
<ul>
<li>
<p><strong>Math</strong> (<code>math_rule</code>)</p>
<ul>
<li><code>worker_cls</code>: Worker class name (e.g., <code>MathRuleRewardWorker</code>)</li>
<li><code>tag_included</code>: These tags use the reward domain for calculation</li>
<li><code>model_args</code>: Reward model parameters</li>
<li><code>world_size</code>: Number of workers</li>
</ul>
</li>
<li>
<p><strong>Code</strong> (<code>code_sandbox</code>)</p>
<ul>
<li>Similar configuration, but for code evaluation</li>
</ul>
</li>
<li>
<p><strong>General Reasoning</strong> (<code>llm_judge</code>)</p>
<ul>
<li>Configuration for using an LLM as a judge</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Validation and Evaluation Settings</strong>
The <code>validation</code> section configures validation datasets and evaluation methods:</p>
<ul>
<li><code>file_name</code>: Path to validation dataset file</li>
<li><code>batch_size</code>: Validation batch size</li>
<li><code>metrics</code>: Evaluation metrics to calculate</li>
</ul>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reward-worker">Reward Worker<a href="#reward-worker" class="hash-link" aria-label="Direct link to Reward Worker" title="Direct link to Reward Worker">​</a></h3>
<p>The rlvr pipeline supports various reward mechanisms for different rlvr domains:</p>
<ul>
<li><strong>Mathematical Rule Reward (<code>MathRuleRewardWorker</code>)</strong> – Evaluates the correctness and steps of mathematical reasoning.</li>
<li><strong>Code Sandbox Reward (<code>CodeSandboxRewardWorker</code>)</strong> – Evaluates code generation by executing the code and verifying its output.</li>
<li><strong>LLM Judge Reward (<code>LLMJudgeRewardWorker</code>)</strong> – Uses another LLM as a judge to evaluate the quality of generated answers.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️data-preparation">✨️Data Preparation<a href="#️data-preparation" class="hash-link" aria-label="Direct link to ✨️Data Preparation" title="Direct link to ✨️Data Preparation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-format">Data Format<a href="#data-format" class="hash-link" aria-label="Direct link to Data Format" title="Direct link to Data Format">​</a></h3>
<p>The rlvr pipeline uses data files in JSON format. Different domains require specific fields:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="common-data-fields">Common Data Fields<a href="#common-data-fields" class="hash-link" aria-label="Direct link to Common Data Fields" title="Direct link to Common Data Fields">​</a></h4>
<p>All domains require the following fields:</p>
<ul>
<li><code>id</code>: Unique identifier for the data point <strong>(required)</strong></li>
<li><code>messages</code> or <code>prompt</code>: Input prompt, can be a list of messages (JSON string) or a single prompt string <strong>(required)</strong></li>
<li><code>tag</code>: For more fine-grained classification (e.g., <code>gsm8k</code>, <code>olympiads</code>, etc.) <strong>(required)</strong></li>
<li><code>difficulty</code>: Problem difficulty level <strong>(optional)</strong></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="domain-specific-fields">Domain-Specific Fields<a href="#domain-specific-fields" class="hash-link" aria-label="Direct link to Domain-Specific Fields" title="Direct link to Domain-Specific Fields">​</a></h4>
<p>Depending on the domain, data points need to include the following specific fields:</p>
<ol>
<li><strong>Math (<code>math_rule</code>)</strong>
<ul>
<li><code>ground_truth</code>: Correct answer or solution steps <strong>(required)</strong></li>
</ul>
</li>
<li><strong>Code (<code>code_sandbox</code>)</strong>
<ul>
<li><code>test_cases</code>: Test cases for verifying code correctness <strong>(required)</strong></li>
<li><code>case_type</code>: Test case type (e.g., <code>pytest</code>) <strong>(required)</strong></li>
<li><code>test_case_function</code>: Test function definition <strong>(optional)</strong></li>
<li><code>ground_truth</code>: Reference answer <strong>(optional)</strong></li>
</ul>
</li>
<li><strong>General Reasoning (<code>llm_judge</code>)</strong>
<ul>
<li><code>ground_truth</code>: Standard answer or reference response <strong>(required)</strong></li>
</ul>
</li>
</ol>
<p>Example data format (MATH):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;source&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gsm8k&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;difficulty&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;prompt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Solve the equation 3x + 5 = 14&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;messages&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[{\&quot;role\&quot;: \&quot;system\&quot;, \&quot;content\&quot;: \&quot;You are a math assistant skilled at solving complex mathematical problems.\&quot;}, {\&quot;role\&quot;: \&quot;user\&quot;, \&quot;content\&quot;: \&quot;Solve the equation 3x + 5 = 14\&quot;}]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;ground_truth&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;204&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;case_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;test_case_function&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;test_cases&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;tag&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;math_rule&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Example data format (Code domain):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5ea1ab&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;source&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;codeforeces&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;difficulty&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;prompt&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;You are an expert Python programmer. You will be given a question (problem specification) and will generate a correct Python program that matches the specification and passes all tests. \n\n### Question: Write a function that takes an array of distinct integers and returns all possible permutations (in any order). Each permutation should be represented as an array of integers. The function should handle arrays of different lengths efficiently.\n\n### Format: You will use the following starter code to write the solution to the problem and enclose your code within delimiters.\n```python\ndef permute(nums):\n```\n\n### Answer: (use the provided format with backticks)&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;messages&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[{\&quot;role\&quot;: \&quot;user\&quot;, \&quot;content\&quot;: \&quot;You are an expert Python programmer. You will be given a question (problem specification) and will generate a correct Python program that matches the specification and passes all tests. \\n\\n### Question: Write a function that takes an array of distinct integers and returns all possible permutations (in any order). Each permutation should be represented as an array of integers. The function should handle arrays of different lengths efficiently.\\n\\n### Format: You will use the following starter code to write the solution to the problem and enclose your code within delimiters.\\n```python\\ndef permute(nums):\\n```\\n\\n### Answer: (use the provided format with backticks)\&quot;}]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;ground_truth&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[\&quot;def permute(nums):\\n    \\\&quot;\\\&quot;\\\&quot;\\n    Given an array of distinct integers, return all possible permutations.\\n    Each permutation is an array of integers.\\n    \\\&quot;\\\&quot;\\\&quot;\\n    def backtrack(start, end):\\n        if start == end:\\n            permutations.append(nums[:])\\n        for i in range(start, end):\\n            nums[start], nums[i] = nums[i], nums[start]\\n            backtrack(start + 1, end)\\n            nums[start], nums[i] = nums[i], nums[start]\\n\\n    permutations = []\\n    backtrack(0, len(nums))\\n    return permutations\&quot;]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;case_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pytest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;test_case_function&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;test_cases&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[{\&quot;assert_code\&quot;: \&quot;\\n\\n\\ndef test_permute_single_element():\\n    assert permute([1]) == [[1]]\\n\\ndef test_permute_two_elements():\\n    result = permute([1, 2])\\n    expected = [[1, 2], [2, 1]]\\n    assert sorted(result) == sorted(expected)\\n\\ndef test_permute_three_elements():\\n    result = permute([1, 2, 3])\\n    expected = [[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]\\n    assert sorted(result) == sorted(expected)\\n\\ndef test_permute_four_elements():\\n    result = permute([1, 2, 3, 4])\\n    expected = [\\n        [1, 2, 3, 4], [1, 2, 4, 3], [1, 3, 2, 4], [1, 3, 4, 2], [1, 4, 2, 3], [1, 4, 3, 2],\\n        [2, 1, 3, 4], [2, 1, 4, 3], [2, 3, 1, 4], [2, 3, 4, 1], [2, 4, 1, 3], [2, 4, 3, 1],\\n        [3, 1, 2, 4], [3, 1, 4, 2], [3, 2, 1, 4], [3, 2, 4, 1], [3, 4, 1, 2], [3, 4, 2, 1],\\n        [4, 1, 2, 3], [4, 1, 3, 2], [4, 2, 1, 3], [4, 2, 3, 1], [4, 3, 1, 2], [4, 3, 2, 1]\\n    ]\\n    assert sorted(result) == sorted(expected)\&quot;}]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tag&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;KodCode&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>In the configuration file, you can set the sampling ratio for different domains using <code>domain_interleave_probs</code>, for example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">domain_interleave_probs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">math_rule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">code_sandbox</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">llm_judge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️running-the-pipeline">✨️Running the Pipeline<a href="#️running-the-pipeline" class="hash-link" aria-label="Direct link to ✨️Running the Pipeline" title="Direct link to ✨️Running the Pipeline">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-1-using-python-launcher-script">Method 1: Using Python Launcher Script<a href="#method-1-using-python-launcher-script" class="hash-link" aria-label="Direct link to Method 1: Using Python Launcher Script" title="Direct link to Method 1: Using Python Launcher Script">​</a></h3>
<p>The primary method is to use the <code>examples/start_rlvr_pipeline.py</code> script. This script uses Hydra to load and manage configurations.</p>
<ol>
<li>
<p><strong>Select or Create a Configuration File</strong><br>
<!-- -->Start with an example YAML (e.g., <code>examples/qwen2.5-7B-rlvr_megatron/rlvr_config.yaml</code>) or create your own configuration.</p>
</li>
<li>
<p><strong>Execute the Python Launcher Script</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Make sure you are in the root directory of the ROLL (ScaleAligner) project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># export PYTHONPATH=$(pwd):$PYTHONPATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python examples/start_rlvr_pipeline.py \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_path examples/qwen2.5-7B-rlvr_megatron \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_name rlvr_config</span><br></span></code></pre></div></div>
<ul>
<li><code>--config_path</code> – Directory containing your YAML configuration.</li>
<li><code>--config_name</code> – Filename (without <code>.yaml</code>).</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-2-using-helper-shell-scripts">Method 2: Using Helper Shell Scripts<a href="#method-2-using-helper-shell-scripts" class="hash-link" aria-label="Direct link to Method 2: Using Helper Shell Scripts" title="Direct link to Method 2: Using Helper Shell Scripts">​</a></h3>
<p>The <code>examples</code> directory typically contains shell scripts that wrap the Python launcher (e.g., <code>start_ppo_pipeline_math_hz.sh</code>).</p>
<p>Example structure:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Example: examples/qwen2.5-7B-rlvr_megatron/run_rlvr_pipeline.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONFIG_NAME=&quot;rlvr_config&quot;                         # rlvr_config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONFIG_PATH=&quot;examples/qwen2.5-7B-rlvr_megatron&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set environment variables and other configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python examples/start_rlvr_pipeline.py \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_path $CONFIG_PATH \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_name $CONFIG_NAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       &quot;$@&quot;   # Pass any additional parameters</span><br></span></code></pre></div></div>
<p>Run using:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bash examples/qwen2.5-7B-rlvr_megatron/run_rlvr_pipeline.sh</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️step-by-step-example">✨️Step-by-Step Example<a href="#️step-by-step-example" class="hash-link" aria-label="Direct link to ✨️Step-by-Step Example" title="Direct link to ✨️Step-by-Step Example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-configure-settings">Step 1: Configure Settings<a href="#step-1-configure-settings" class="hash-link" aria-label="Direct link to Step 1: Configure Settings" title="Direct link to Step 1: Configure Settings">​</a></h3>
<ul>
<li>
<p>File: <code>examples/qwen2.5-7B-rlvr_megatron/rlvr_config.yaml</code><br>
<!-- -->Key sections include <code>exp_name</code>, <code>seed</code>, <code>output_dir</code>, model paths, <code>actor_train</code>, <code>actor_infer</code>, <code>reference</code>, PPO parameters, and reward configurations.</p>
</li>
<li>
<p>Pay special attention to these configuration sections:</p>
<ul>
<li>Data configuration: <code>actor_train.data_args.file_name</code> and <code>domain_interleave_probs</code></li>
<li>Model configuration: <code>pretrain</code> and <code>reward_pretrain</code> paths</li>
<li>Distributed strategies: <code>strategy_args</code> and <code>device_mapping</code> for each worker</li>
<li>Reward configuration: Reward workers for different domains in the <code>rewards</code> section</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-prepare-environment-and-dependencies">Step 2: Prepare Environment and Dependencies<a href="#step-2-prepare-environment-and-dependencies" class="hash-link" aria-label="Direct link to Step 2: Prepare Environment and Dependencies" title="Direct link to Step 2: Prepare Environment and Dependencies">​</a></h3>
<ul>
<li>
<p>Ensure all necessary dependencies are installed:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install -r requirements.txt</span><br></span></code></pre></div></div>
</li>
<li>
<p>Verify that all model paths in the configuration are accessible.</p>
</li>
<li>
<p>Prepare training and validation datasets, ensuring they conform to the data format requirements described above.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-launch-the-pipeline">Step 3: Launch the Pipeline<a href="#step-3-launch-the-pipeline" class="hash-link" aria-label="Direct link to Step 3: Launch the Pipeline" title="Direct link to Step 3: Launch the Pipeline">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python examples/start_rlvr_pipeline.py \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_path examples/qwen2.5-7B-rlvr_megatron_hz \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_name ppo</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-monitoring">Step 4: Monitoring<a href="#step-4-monitoring" class="hash-link" aria-label="Direct link to Step 4: Monitoring" title="Direct link to Step 4: Monitoring">​</a></h3>
<ul>
<li>
<p><strong>Console Output</strong> – Observe Hydra, Ray, and pipeline logs.</p>
</li>
<li>
<p><strong>Log Files</strong> – Check the <code>logging_dir</code> specified in the YAML.</p>
</li>
<li>
<p><strong>TensorBoard</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tensorboard --logdir &lt;your_log_dir&gt;</span><br></span></code></pre></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-outputs-and-results">Step 5: Outputs and Results<a href="#step-5-outputs-and-results" class="hash-link" aria-label="Direct link to Step 5: Outputs and Results" title="Direct link to Step 5: Outputs and Results">​</a></h3>
<ul>
<li><strong>Trained Models</strong> – Checkpoints are saved in the <code>output_dir</code>.</li>
<li><strong>Evaluation Metrics</strong> – Recorded in TensorBoard and the console.</li>
<li><strong>Generated Examples</strong> – The pipeline periodically outputs generated examples so you can visually assess model improvements.</li>
</ul>
<hr>
<p><em>Happy experimenting!</em></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/examples/rlvr_pipeline_start.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ROLL/docs/examples/config_guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configuration Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ROLL/docs/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ROLL</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#️overview" class="table-of-contents__link toc-highlight">✨️Overview</a></li><li><a href="#️core-components" class="table-of-contents__link toc-highlight">✨️Core Components</a><ul><li><a href="#main-module-rlvrpipeline" class="table-of-contents__link toc-highlight">Main Module (<code>RLVRPipeline</code>)</a></li><li><a href="#configuration-file-rlvrconfig" class="table-of-contents__link toc-highlight">Configuration File (<code>RLVRConfig</code>)</a></li><li><a href="#reward-worker" class="table-of-contents__link toc-highlight">Reward Worker</a></li></ul></li><li><a href="#️data-preparation" class="table-of-contents__link toc-highlight">✨️Data Preparation</a><ul><li><a href="#data-format" class="table-of-contents__link toc-highlight">Data Format</a></li></ul></li><li><a href="#️running-the-pipeline" class="table-of-contents__link toc-highlight">✨️Running the Pipeline</a><ul><li><a href="#method-1-using-python-launcher-script" class="table-of-contents__link toc-highlight">Method 1: Using Python Launcher Script</a></li><li><a href="#method-2-using-helper-shell-scripts" class="table-of-contents__link toc-highlight">Method 2: Using Helper Shell Scripts</a></li></ul></li><li><a href="#️step-by-step-example" class="table-of-contents__link toc-highlight">✨️Step-by-Step Example</a><ul><li><a href="#step-1-configure-settings" class="table-of-contents__link toc-highlight">Step 1: Configure Settings</a></li><li><a href="#step-2-prepare-environment-and-dependencies" class="table-of-contents__link toc-highlight">Step 2: Prepare Environment and Dependencies</a></li><li><a href="#step-3-launch-the-pipeline" class="table-of-contents__link toc-highlight">Step 3: Launch the Pipeline</a></li><li><a href="#step-4-monitoring" class="table-of-contents__link toc-highlight">Step 4: Monitoring</a></li><li><a href="#step-5-outputs-and-results" class="table-of-contents__link toc-highlight">Step 5: Outputs and Results</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ROLL/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ROLL/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>